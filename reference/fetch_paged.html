<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function performs a request for data from the UniProt REST
API, fetches the results using pagination, and saves them to a file or
into memory.
You likely won't use this function directly, but rather one of the
wrapper functions: uniprot_map(), uniprot_search(), or uniprot_single().
Things to note:


The pagination endpoint is less expensive for the API infrastructure to
deal with versus fetch_stream(), as the memory demand is distributed
over a longer period of time.
If the connection is interrupted while fetching results with pagination,
only the request for the current page needs to be reattempted. With the
stream endpoint, the entire request needs to be completely restarted.



"><title>Fetch results via pagination — fetch_paged • uniprotREST</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fetch results via pagination — fetch_paged"><meta property="og:description" content="This function performs a request for data from the UniProt REST
API, fetches the results using pagination, and saves them to a file or
into memory.
You likely won't use this function directly, but rather one of the
wrapper functions: uniprot_map(), uniprot_search(), or uniprot_single().
Things to note:


The pagination endpoint is less expensive for the API infrastructure to
deal with versus fetch_stream(), as the memory demand is distributed
over a longer period of time.
If the connection is interrupted while fetching results with pagination,
only the request for the current page needs to be reattempted. With the
stream endpoint, the entire request needs to be completely restarted.



"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">uniprotREST</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/uniprotREST.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Fetch results via pagination</h1>
      
      <div class="d-none name"><code>fetch_paged.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function performs a request for data from the UniProt REST
API, fetches the results using pagination, and saves them to a file or
into memory.</p>
<p>You likely won't use this function directly, but rather one of the
wrapper functions: <code><a href="uniprot_map.html">uniprot_map()</a></code>, <code><a href="uniprot_search.html">uniprot_search()</a></code>, or <code><a href="uniprot_single.html">uniprot_single()</a></code>.</p><div class="section">
<h3 id="things-to-note-">Things to note:<a class="anchor" aria-label="anchor" href="#things-to-note-"></a></h3>

<ol><li><p>The pagination endpoint is less expensive for the API infrastructure to
deal with versus <code><a href="fetch_stream.html">fetch_stream()</a></code>, as the memory demand is distributed
over a longer period of time.</p></li>
<li><p>If the connection is interrupted while fetching results with pagination,
only the request for the current page needs to be reattempted. With the
stream endpoint, the entire request needs to be completely restarted.</p></li>
</ol></div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fetch_paged</span><span class="op">(</span><span class="va">req</span>, <span class="va">n_pages</span>, format <span class="op">=</span> <span class="st">"tsv"</span>, path <span class="op">=</span> <span class="cn">NULL</span>, verbosity <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>req</dt>
<dd><p>A <a href="https://httr2.r-lib.org/reference/request.html" class="external-link">request</a>.</p></dd>


<dt>n_pages</dt>
<dd><p><code>integer</code>, the number of pages to be fetched. This can be
calculated by dividing the number of total results by the page size e.g.
<code>resp$headers$x-total-results / page_size</code>.</p></dd>


<dt>format</dt>
<dd><p><code>string</code>, data format to fetch. Can one of <code>"tsv"</code>, or <code>"fasta"</code>.</p></dd>


<dt>path</dt>
<dd><p>Optionally, path to save body of request. This is useful for
large responses since it avoids storing the response in memory.</p></dd>


<dt>verbosity</dt>
<dd><p>How much information to print? This is a wrapper
around <code>req_verbose()</code> that uses an integer to control verbosity:</p><ul><li><p>0: no output</p></li>
<li><p>1: show headers</p></li>
<li><p>2: show headers and bodies</p></li>
<li><p>3: show headers, bodies, and curl status messages.</p></li>
</ul><p>Use <code><a href="https://httr2.r-lib.org/reference/with_verbosity.html" class="external-link">with_verbosity()</a></code> to control the verbosity of requests that
you can't affect directly.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>By default, returns an object whose type depends on <code>format</code>:</p><ul><li><p><strong><code>tsv</code></strong>: <code>data.frame</code></p></li>
<li><p><strong><code>json</code></strong>: <code>list</code></p></li>
<li><p><strong><code>fasta</code></strong>: <a href="https://rdrr.io/pkg/Biostrings/man/XStringSet-class.html" class="external-link">Biostrings::AAStringSet</a> (or <code>named character</code> if
Biostrings not installed)</p></li>
</ul><p>If <code>parse = FALSE</code>, returns an <code>httr2_response</code>. If <code>path</code> is specified,
saves the parsed results to the file path indicated, and returns <code>NULL</code></p>


<p>invisibly.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">req</span> <span class="op">&lt;-</span> <span class="fu"><a href="uniprot_request.html">uniprot_request</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"https://rest.uniprot.org/uniref/search"</span>,</span></span>
<span class="r-in"><span>    query <span class="op">=</span> <span class="st">"P99999"</span>,</span></span>
<span class="r-in"><span>    format <span class="op">=</span> <span class="st">"tsv"</span>,</span></span>
<span class="r-in"><span>    fields <span class="op">=</span> <span class="st">"id,name,count"</span>,</span></span>
<span class="r-in"><span>    size <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">fetch_paged</span><span class="op">(</span><span class="va">req</span>, n_pages <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Charlotte Dawson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

